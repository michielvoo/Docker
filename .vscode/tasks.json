{
    "version": "2.0.0",
    "windows": {
        "options": {
            "shell": {
                "executable": "powershell.exe"
            }
        }
    },
    "tasks": 
    [
        {
            "label": "Build",
            "detail": "Build a :latest Docker image",
            "type": "process",
            "command": "pwsh",
            "args": ["-File", ".vscode/tasks.ps1", "Build", "${input:name}"],
            "group": {
                "kind": "build",
                "isDefault": true
            }
        },
        {
            "label": "Build current",
            "detail": "Build a :latest Docker image from the currently opened Dockerfile",
            "type": "process",
            "command": "pwsh",
            "args": ["-File", ".vscode/tasks.ps1", "Build", "${file}"],
            "group": {
                "kind": "build",
                "isDefault": false
            }
        },
        {
            "label": "Test",
            "detail": "Run all tests",
            "type": "process",
            "command": "pwsh",
            "windows": {
                "command": "powershell.exe"
            },
            "args": ["-File", ".vscode/tasks.ps1", "Test", "${workspaceFolder}"],
            "group": {
                "kind": "test",
                "isDefault": true
            }
        },
        {
            "label": "Test current",
            "detail": "Run tests for the currently opened Dockerfile or in the currently opened PowerShell file",
            "type": "process",
            "command": "pwsh",
            "windows": {
                "command": "powershell.exe"
            },
            "args": ["-File", ".vscode/tasks.ps1", "Test", "${file}"],
            "group": {
                "kind": "test",
                "isDefault": false
            }
        },
    ],
    "inputs":
    [
        {
            "id": "name",
            "type": "pickString",
            "description": "Choose a Docker image",
            "options": ["aws", "az", "ci/powershell", "hugo", "pester", "pwsh"]
        }
    ]
}
